%% -*- coding:utf-8 -*- 
\section{Decomposition of the Electromagnetic Field into Modes (Types of Oscillations)}
The electromagnetic field satisfies the Maxwell equations system:
\begin{equation}
rot \vec{H} = \frac{\partial \vec{D}}{\partial t} + \vec{j}, 
\quad
rot \vec{E} = - \frac{\partial \vec{B}}{\partial t}, 
\quad
div \vec{D} = \rho, \quad
div \vec{B} = 0.
\end{equation}
In free space ($\vec{j} = 0$, $\rho = 0$) we have a simpler system:
\begin{eqnarray}
rot \vec{H} = \varepsilon_0 \frac{\partial \vec{E}}{\partial t}, 
\quad
rot \vec{E} = - \mu_0 \frac{\partial \vec{H}}{\partial t}, 
\nonumber \\
div \vec{H} = 0,
\quad
div \vec{E} = 0, 
\nonumber \\
\vec{B} = \mu_0 \vec{H}, 
\quad 
\vec{D} = \varepsilon_0 \vec{E}, 
\quad
\mu_0 \varepsilon_0 = \frac{1}{c^2}.
\label{eqCh1_EMF_at_FreeSpace}
\end{eqnarray}

Eliminating $\vec{H}$ from \eqref{eqCh1_EMF_at_FreeSpace}, we obtain
the equation:
\begin{equation}
rot \, rot \, \vec{E} = - \mu_0 \frac{\partial}{\partial t} rot \vec{H} = -
\varepsilon_0 \mu_0 \frac{\partial^2 \vec{E}}{\partial t^2} = 
- \frac{1}{c^2} \frac{\partial^2 \vec{E}}{\partial t^2}.
\nonumber
\end{equation}

Taking into account that $rot \, rot \, \vec{E} = grad \, div \vec{E} - \Delta \vec{E} = - \Delta
\vec{E}$ \footnote{under the condition $div \vec E = 0$}, we get the following system

\begin{eqnarray}
\Delta \vec{E} - \frac{1}{c^2} \frac{\partial^2 \vec{E}}{\partial t^2}
= 0;
\nonumber \\
div \vec{E} = 0, 
\quad
\frac{\partial H}{\partial t} = - \frac{1}{\mu_0} rot \vec{E}
\nonumber \\
\vec{B} = \mu_0 \vec{H}, \quad \vec{D} = \varepsilon_0 \vec{E}, \quad \mu_0
\varepsilon_0 = \frac{1}{c^2}.
\label{eqCh1_EMF_at_FreeSpace2}
\end{eqnarray}
which is fully equivalent to the original system of equations.

For quantization of the electromagnetic field, its equations are conveniently
represented in a so-called Hamiltonian form. The essence of the method, well-known
to radio physicists, is that the field is decomposed into
modes, and the solution of the equations reduces to solving a system of ordinary
differential equations for the expansion coefficients depending on time.
For this purpose, a system of orthogonal vector functions is introduced, which represent the field distributions corresponding to the eigen oscillations of the electromagnetic field in a certain volume $V$ bounded by an ideal conducting surface $S$. The fields must satisfy
the system of equations \eqref{eqCh1_EMF_at_FreeSpace2}. On the surface $S$
certain boundary conditions must be met, for example: 
\begin{equation}
\left. \left[ \vec{n} \times \vec{E} \right] \right|_S = 0 \,
\mbox{or}
\left. \left( \vec{n} \cdot \vec{H} \right) \right|_S = 0,
\label{eqCh1_bound}
\end{equation}
corresponding to an ideal conducting surface.

An arbitrary electromagnetic field in the volume $V$ is represented by expansions:
\begin{equation}
\vec{E}\left(r, t\right) = \sum_{(n)} Q_n\left(t\right)\vec{E}_n\left(r\right),
\quad
\vec{H}\left(r, t\right) = \sum_{(n)} P_n\left(t\right)\vec{H}_n\left(r\right),
\label{eqCh1_sep0}
\end{equation}
where $Q_n\left(t\right)\vec{E}_n\left(r\right)$ and 
$P_n\left(t\right)\vec{H}_n\left(r\right)$ are particular solutions of the equations satisfying the boundary conditions
\eqref{eqCh1_bound}; $\vec{E}_n\left(r\right)$ and  
$\vec{H}_n\left(r\right)$ correspond to the $n$-th type 
of oscillation in the volume $V$ (the mode).
From the equations \eqref{eqCh1_EMF_at_FreeSpace2} we have:
\begin{equation}
Q_n\left(t\right) \, \Delta \vec{E}_n\left(r\right) = 
\frac{1}{c^2} \frac{d^2 Q_n}{d t^2}\vec{E}_n\left(r\right). 
\end{equation}

Separating variables, we get:
\begin{equation}
\frac{d^2 Q_n}{d t^2} + \omega_n^2 Q_n = 0,
\quad
\Delta \vec{E}_n \left(r\right) = - \frac{\omega_n^2}{c^2} 
\vec{E}_n \left(r\right)
\label{eqCh1_after_sep}
\end{equation}
where $\omega_n$ is the separation constant, which is the eigenfrequency.

The second of the equations \eqref{eqCh1_after_sep} has the form:
\begin{equation}
\Delta \vec{E}_n\left(r\right) + k_n^2 \vec{E}_n\left(r\right) = 0,
\quad
k_n^2 = \frac{\omega_n^2}{c^2},
\end{equation}
with boundary conditions  
$\left. \left[ \vec{n} \times \vec{E}_n \right] \right|_S = 0$. This
problem has a solution only for certain values  
$k_n\left(\omega_n\right)$.

To determine $\vec{H}_n\left(r\right)$ we use the equations 
\eqref{eqCh1_EMF_at_FreeSpace2}:
\begin{equation}
Q_n\left(t\right)  rot
\vec{E}_n\left(r\right) = -\mu_0 \frac{d P_n}{d t}
\vec{H}_n\left(r\right).
\label{eqCh1_separationH_before_podstanovka}
\end{equation}

First of all, make the following substitution:
\begin{equation}
Q_n\left(t\right) = \frac{\omega_n}{\sqrt{\varepsilon_0}}q_n\left(t\right),
\quad
P_n\left(t\right) = \frac{1}{\sqrt{\mu_0}}p_n\left(t\right).
\label{eqCh1_separation_podstanovka}
\end{equation}
For the new variable $q_n$, it is obvious from \eqref{eqCh1_after_sep} that
\[
\frac{d^2 q_n}{d t^2} + \omega_n^2 q_n = 0.
\]
The expansion \eqref{eqCh1_sep0} in the new variables has the form:
\begin{equation}
\vec{E}\left(r, t\right) = \sum_{(n)}
\frac{q_n\left(t\right) \omega_n}{\sqrt{\varepsilon_0}} \vec{E}_n\left(r\right),
\quad
\vec{H}\left(r, t\right) = \sum_{(n)}
\frac{p_n\left(t\right)}{\sqrt{\mu_0}} \vec{H}_n\left(r\right),
\label{eqCh1_sep1}
\end{equation}

Taking into account the substitution \eqref{eqCh1_separation_podstanovka} and the expression for the speed of light $c =   \frac{1}{\sqrt{\varepsilon_0 \mu_0}}$
\eqref{eqCh1_EMF_at_FreeSpace}, we can rewrite 
\eqref{eqCh1_separationH_before_podstanovka} in the form
\begin{equation}
q_n\left(t\right) rot \vec{E}_n\left(r\right) = - \frac{1}{c \omega_n}
\frac{d p_n\left(t\right)}{d t} \vec{H}_n\left(r\right).
\label{eqCh1_after_sep2}
\end{equation}
The equations \eqref{eqCh1_after_sep2} will be satisfied if  
\[
p_n = \frac{d q_n}{d t}, \quad \frac{d p_n}{d t} = 
\frac{d^2 q_n}{d t^2} = - \omega_n^2 q_n,
\]
then
\begin{eqnarray}
rot \vec{E}_n\left(r\right) = k_n \vec{H}_n\left(r\right),
\nonumber \\
\vec{H}_n\left(r\right) =  \frac{1}{k_n} rot \vec{E}_n\left(r\right).
\end{eqnarray}

From the course "Electromagnetic Oscillations", it is known that the system of functions  
$\vec{E}_n\left(r\right)$, $\vec{H}_n\left(r\right)$ is orthogonal and
can be normalized as follows: 
\begin{equation}
\int_{V} \left( \vec{E}_n \cdot \vec{E}_m \right) d V = \delta_{nm},
\quad
\int_{V} \left( \vec{H}_n \cdot \vec{H}_m \right) d V = \delta_{nm},
\quad
\int_{V} \left( \vec{H}_n \cdot \vec{E}_m \right) d V = 0.
\label{eqCh1_task1}
\end{equation}

The original electrodynamics problem reduces to finding the coefficients $q_n\left(t\right)$, $p_n\left(t\right)$
in the expansions \eqref{eqCh1_sep1}.